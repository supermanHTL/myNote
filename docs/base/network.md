# 第三层《网络》

## http2 特性

**1、二进制分帧**

`HTTP/2` 采用二进制格式传输数据，而非 `HTTP 1.x` 的文本格式，二进制协议解析起来更高效。

**帧**：`HTTP/2` 数据通信的最小单位消息：指 `HTTP/2` 中逻辑上的 `HTTP` 消息。例如请求和响应等，消息由一个或多个帧组成。

**流**：存在于连接中的一个虚拟通道。流可以承载双向消息，每个流都有一个唯一的整数`ID`。

**2、多路复用**

多路复用，代替原来的序列和阻塞机制。所有请求的都是通过一个 `TCP` 连接并发完成。 `HTTP 1.x` 中，如果想并发多个请求，必须使用多个 `TCP` 链接，且浏览器为了控制资源，还会对单个域名有 **6-8** 个的 `TCP` 链接请求限制

**3、服务器推送**

服务端可以在发送页面`HTML`时主动推送其它资源，而不用等到浏览器解析到相应位置，发起请求再响应。例如服务端可以主动把`JS`和`CSS`文件推送给客户端，而不需要客户端解析`HTML`时再发送这些请求。

服务端可以主动推送，客户端也有权利选择是否接收。如果服务端推送的资源已经被浏览器缓存过，浏览器可以通过发送`RST_STREAM`帧来拒收。主动推送也遵守同源策略，服务器不会随便推送第三方资源给客户端。

**4、头部压缩**

`HTTP 1.1`请求的大小变得越来越大，有时甚至会大于`TCP`窗口的初始大小，因为它们需要等待带着`ACK`的响应回来以后才能继续被发送。`HTTP/2`对消息头采用`HPACK`（专为`http/2`头部设计的压缩格式）进行压缩传输，能够节省消息头占用的网络的流量。而`HTTP/1.x`每次请求，都会携带大量冗余头信息，浪费了很多带宽资源。
